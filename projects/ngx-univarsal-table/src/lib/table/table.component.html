<div class="table-section">
  <div id="table-scroll" class="table-scroll" [style.height]="tableHeight + 'px'" style="overflow-x: auto;">
    <table #mainTable id="main-table" class="table table-resizable">
      <thead class="fixed-header">
        <tr>
          <th *ngIf="showCheckBox" style="width: 25px;" [ngStyle]="{'color': headerColor, 'background': headerBg}">
            <input type="checkbox" (change)="checkAll()" [(ngModel)]="selectAll">
          </th>
          <ng-container *ngFor="let header of gtColumnList; let i = index">
            <th scope="col" [ngStyle]="{
                'color': headerColor,
                'background': headerBg,
                'width': header.size + 'px',
                'min-width': header.size + 'px'
              }" class="resizable-column">
              <div class="headerSection">
                {{ header.header }}
                <span *ngIf="header.sorting" class="sorting-icons"
                  (click)="header.sorting ? onSort(header.field) : null">
                  <span class="material-icons activeSort"
                    *ngIf="sortField === header.field && !sortDirection">arrow_downward</span>
                  <span class="material-icons activeSort"
                    *ngIf="sortField === header.field && sortDirection">arrow_upward</span>
                  <span class="material-icons" *ngIf="sortField !== header.field">arrow_downward</span>
                </span>
              </div>
              <!-- Resize handle -->
              <span class="resize-handle" (mousedown)="startResizeColumn($event, i)"></span>
            </th>
          </ng-container>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of rowData | paginate: { itemsPerPage: itemPerPage, currentPage: page }">
          <td *ngIf="showCheckBox" style="width: 25px;">
            <input type="checkbox" [(ngModel)]="row.checked" (change)="onCheckRow()">
          </td>
          <ng-container *ngFor="let column of gtColumnList">
            <td [ngStyle]="{'width': column.size + 'px', 'min-width': column.size + 'px'}">
              <span *ngIf="column.field2 && column.field1">
                <span *ngIf="!row[column.field0]">-</span>
                <span *ngIf="row[column.field0]">
                  {{row[column.field0][column.field1][column.field2] | universal}}
                </span>
              </span>
              <span *ngIf="column.field1 && !column.field2">
                <span *ngIf="row[column.field0]">{{row[column.field0][column.field1] | universal}}</span>
              </span>
              <span *ngIf="!column.field1">
                <span>{{row[column.field] | universal}}</span>
              </span>
            </td>
          </ng-container>
        </tr>
      </tbody>
    </table>
  </div>
  <pagination-controls (pageChange)="page = $event"></pagination-controls>
</div>